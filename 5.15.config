CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_ROOTFS_TARGZ=y

# 文件系统支持
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_EXT4_RESERVED_PCT=0
CONFIG_TARGET_EXT4_BLOCKSIZE_4K=y
# CONFIG_TARGET_EXT4_BLOCKSIZE_2K is not set
# CONFIG_TARGET_EXT4_BLOCKSIZE_1K is not set
CONFIG_TARGET_EXT4_BLOCKSIZE=4096
# CONFIG_TARGET_EXT4_JOURNAL is not set
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_SQUASHFS_BLOCK_SIZE=256
CONFIG_TARGET_UBIFS_FREE_SPACE_FIXUP=y
CONFIG_TARGET_UBIFS_JOURNAL_SIZE=""

# EFI和GRUB支持
CONFIG_GRUB_IMAGES=y
CONFIG_GRUB_EFI_IMAGES=y
CONFIG_GRUB_CONSOLE=y
CONFIG_GRUB_BAUDRATE=115200
# CONFIG_GRUB_FLOWCONTROL is not set
CONFIG_GRUB_BOOTOPTS=""
CONFIG_GRUB_TIMEOUT="0"
CONFIG_GRUB_TITLE="LEDE"

# 虚拟化镜像格式
# CONFIG_ISO_IMAGES is not set
CONFIG_QCOW2_IMAGES=y
CONFIG_VDI_IMAGES=y
CONFIG_VMDK_IMAGES=y
CONFIG_VHDX_IMAGES=y

# 串口和压缩
CONFIG_TARGET_SERIAL="ttyS0"
CONFIG_TARGET_IMAGES_GZIP=y



CONFIG_PACKAGE_kmod-pcie_mhi=m

# 编译工具链
CONFIG_TOOLCHAIN_USE_CLANG=y
CONFIG_TOOLCHAIN_USE_LLD=y

# 禁用有问题的工具（避免编译错误）
# CONFIG_TOOLS_erofs-utils is not set

# DAE
CONFIG_KERNEL_DEBUG_INFO=y
CONFIG_KERNEL_DEBUG_INFO_REDUCED=n
CONFIG_KERNEL_DEBUG_INFO_BTF=y
CONFIG_KERNEL_CGROUPS=y
CONFIG_KERNEL_CGROUP_BPF=y
CONFIG_KERNEL_BPF_EVENTS=y
CONFIG_BPF_TOOLCHAIN_HOST=y
CONFIG_KERNEL_XDP_SOCKETS=y

# LuCI 插件
CONFIG_PACKAGE_luci-app-zerotier=y
CONFIG_PACKAGE_luci-app-wrtbwmon=y
CONFIG_PACKAGE_luci-app-wol=y
CONFIG_PACKAGE_luci-app-wireguard=y
CONFIG_PACKAGE_luci-app-watchcat=y
CONFIG_PACKAGE_luci-app-arpbind=y
CONFIG_PACKAGE_luci-app-autoreboot=y
CONFIG_PACKAGE_luci-app-filetransfer=y
CONFIG_PACKAGE_luci-app-firewall=y
CONFIG_PACKAGE_luci-app-frpc=y
CONFIG_PACKAGE_luci-app-mwan3=y
CONFIG_PACKAGE_luci-app-mwan3helper=y
CONFIG_PACKAGE_luci-app-nlbwmon=y
CONFIG_PACKAGE_luci-app-ramfree=y
CONFIG_PACKAGE_luci-app-turboacc=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_SHORTCUT_FE_CM=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_BBR_CCA=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_PDNSD=y
CONFIG_PACKAGE_luci-app-vlmcsd=y
CONFIG_PACKAGE_luci-app-argon-config=y
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-theme-bootstrap=y

# SSR-Plus 和 Bypass 插件
CONFIG_PACKAGE_luci-app-ssr-plus=y
CONFIG_PACKAGE_luci-i18n-ssr-plus-zh-cn=y
CONFIG_PACKAGE_luci-app-bypass=y

# SmartDNS
CONFIG_PACKAGE_smartdns=y
CONFIG_PACKAGE_luci-app-smartdns=y

# LuCI 插件依赖包
CONFIG_PACKAGE_zerotier=y
CONFIG_PACKAGE_wireguard-tools=y
CONFIG_PACKAGE_wireguard-kmod=y
CONFIG_PACKAGE_frpc=y
CONFIG_PACKAGE_vlmcsd=y
CONFIG_PACKAGE_wol=y
CONFIG_PACKAGE_watchcat=y
CONFIG_PACKAGE_mwan3=y
CONFIG_PACKAGE_nlbwmon=y
CONFIG_PACKAGE_wrtbwmon=y

# Shadowsocks-libev 依赖（SSR-Plus 和 Bypass 需要）
CONFIG_PACKAGE_shadowsocks-libev=y
CONFIG_PACKAGE_shadowsocks-libev-ss-server=y
CONFIG_PACKAGE_shadowsocks-libev-ss-local=y
CONFIG_PACKAGE_shadowsocks-libev-ss-redir=y

# Rust 工具链（SmartDNS 需要）
CONFIG_PACKAGE_host-rust=y
CONFIG_PACKAGE_host-rust-bindgen=y

# ============================================================
# OpenClash 依赖包配置
# ============================================================
# DNS 服务器（完整版，支持 DHCPv6）
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_dnsmasq_full_dhcpv6=y

# 基础工具
CONFIG_PACKAGE_bash=y              # Bash shell（脚本执行需要）
CONFIG_PACKAGE_curl=y              # 下载工具（下载 Clash 核心）
CONFIG_PACKAGE_ca-bundle=y         # CA 证书包（HTTPS 连接需要）
CONFIG_PACKAGE_unzip=y             # 解压工具（解压 Clash 核心）

# 网络工具
CONFIG_PACKAGE_ipset=y             # IP 集合管理（规则匹配）
CONFIG_PACKAGE_ip-full=y           # IP 路由工具（完整版，路由管理）

# Ruby 环境（配置处理）
CONFIG_PACKAGE_ruby=y              # Ruby 解释器
CONFIG_PACKAGE_ruby-yaml=y         # YAML 解析库（配置文件解析）

# LuCI 兼容层
CONFIG_PACKAGE_luci-compat=y       # LuCI 兼容层（Luci >= 19.07 需要）

# iptables 防火墙工具（OpenClash 透明代理需要）
CONFIG_PACKAGE_iptables=y          # iptables 防火墙工具
CONFIG_PACKAGE_iptables-mod-tproxy=y    # 透明代理模块（TPROXY）
CONFIG_PACKAGE_iptables-mod-extra=y     # 额外 iptables 模块
CONFIG_PACKAGE_kmod-ipt-nat=y      # NAT 内核模块

# IPv6 支持
CONFIG_PACKAGE_ip6tables-mod-nat=y      # IPv6 NAT 支持

# 内核模块
CONFIG_PACKAGE_kmod-tun=y          # TUN/TAP 设备支持（TUN 模式必需）
CONFIG_PACKAGE_kmod-inet-diag=y   # 进程诊断模块（PROCESS-NAME 规则需要）
CONFIG_PACKAGE_kmod-nft-tproxy=y  # Firewall4 透明代理支持（nftables TPROXY）
